Checklist for rOpenSci reviews - round 1
================


This Markdown file will contain items from each of our reviews along with a
checklist to ensure that we address each item. Reviews may not be reproduced in
full, but all of the items that require action from us should be included here
(please add to this document if anything is missing).

Ultimately, the contents of this file will be transformed into our Response to
Reviews.

As we address items, we should:  
- check it off in this file  
- add in the name of the commit to this file using the first 7
characters of the commit ID

For example:  
- [x] consolidate visual perception functions into one function
[(7f666ce)](https://github.com/vbaliga/pathviewR/commit/7f666ce6e9eee09545ddd9e30d18c0c87ab7eeaf)  
- [ ] get a million dollars

The first item was addressed and the corresponding commit has been
linked. Note that the item has been checked off via adding an “x” to “[ ]”.

The second item is...a work in progress...

## Review from Reviewer 1 (asbonnetlebrun)

### Documentation
#### **Examples** for all exported functions in R Help that run successfully locally

> There are examples for almost all exported functions in R help. Exceptions are
the calc_sf_box(), calc_sf_V(), calc_vis_angle_box() and calc_vis_angle_V()
functions (and standardised_tunnel, although there is a reason given in the R
help – because no example data is provided with pathviewR to run the code on).

Items for us:  
- [ ] consider and/or make examples for calc_sf_box(), calc_sf_V(),
calc_vis_angle_box() and calc_vis_angle_V() (OR, make examples for whatever
visual perception function(s) we make)

#### **Community guidelines** including contribution guidelines in the README or CONTRIBUTING, and DESCRIPTION with URL, BugReports and Maintainer (which may be autogenerated via Authors@R).

> Only in the DESCRIPTION file, but not in the README. 

Items for us:  
- [ ] add contribution guidelines (links to Issues pages) in README

#### **Functionality**
*We will address these items in the `Review Comments` section below*

> Should the author(s) deem it appropriate, I agree to be acknowledged as a
package reviewer ("rev" role) in the package DESCRIPTION file.

Items for us:  
- [ ] add asbonnetlebrun as a "rev" in DESCRIPTION

### Review Comments

#### Data import and cleaning 
 
> My understanding is that the “Relabeling axes” and “gathering data columns”
parts are only relevant in the case of Motive data (Flydra data already comes in
the correct format, and as_viewr(), the function to import other types of data
also takes data in the correct format and already relabels the columns). Maybe
this could be made a bit clearer in the vignette?

Items for us:   
- [ ] clarify language of this vignette to indicate that relabeling & gathering
are only necessary in certain cases (e.g. using Motive data)

> Maybe that was me not being very familiar with the kind of experiments the
package is relevant for, but I had trouble to understand when we would use the
standardize_tunnel() function or the rotate_tunnel() function. Maybe you could
provide some examples when these functions to be applied? Also I struggled to
understand the standardize_tunnel() function, maybe particularly because there
was no example in the help file. When would the landmarks already be in the
data? I guess it will never be the case with Flydra data, considering that the
read_flydra_mat() function allows to input only a single subject_name. Is that
why it doesn’t need to be rotated, or is that something arising from the Flydra
software?

Items for us:   
- [ ] in this vignette: clarify the circumstances under which standardization is
needed and what types of landmarks are appropriate (consider adding a figure?)  
- [ ] in the Help file for `standardize_tunnel()`: clarify this function's use 
cases and perhaps link to the vignette itself?  

> Also, considering how the select_x_percent() function works (by selecting a
certain percentage of the tunnel length on each site of (0,0,0) along the length
axis), shouldn’t it be more appropriate to say that the (0,0,0) must be at the
centre of the region of interest, rather than at the centre of the tunnel?

Items for us:   
- [ ] revise language of this vignette on what (0,0,0) represents

> Minor point: the link to the vignette for managing frame gaps is missing in
the text.

Items for us:   
- [ ] add link

#### Managing frame gaps 

> Very minor point: could it be clearer in the visualize_frame_gap_choice() help
or in the vignette that the loops argument represents the maximum frame gap
considered (i.e. that each loop represents an increment of 1 on the frame gap
value)?

Items for us:   
- [ ] add details to vignette  
- [ ] add details to Help file

> Could there be cases when frame gaps can vary between devices (i.e. if I
understood well in the case of the Motive data, between subjects)? If so, would
it be relevant to allow the autodetect approach to be applied to each subject
separately? (or maybe that is not relevant...)

Items for us:  
- [ ] do we not already do this? Let's look into it. If we already do, let's
see if we can make it clearer in the vignette.

#### Visual perception 

> This is where I struggled, but maybe that is because I don’t come from the
specific field of application of this package. I felt like some more details
could be included in the vignette. Maybe start with a few examples of
experiments where this package can be useful. Maybe you could say right at the
start that these functions are relevant for experiments with animals flying in
tunnels with visual stimuli consisting of sine wave gratings on the tunnel
walls?

Items for us:   
- [ ] revise the language of the first couple paragraphs accordingly

> Also, my understanding is that here you implement only two cases:

>    Motive example: birds flying through a V-shaped tunnel, with visual stimuli
on each side of the tunnel
>    Flydra example: birds flying through a rectangular tunnel, with visual
stimuli on the side and front walls. So maybe make it clear that this section
only applies to these two specific cases?

> On this, a question: is there any plan to code more situations or are these
the typical situations for these kinds of experiment? If you welcome suggestions
from users of other settings, maybe you could say that in the vignette in the
same way you mention that you are happy to work towards the inclusion of more
data types?

Items for us:  
- [ ] revise the language of how these experiments are introduced  
- [ ] provide links to Issues page where users can request e.g. different 
tunnel setups
 
> More generally, I would have appreciated some definition of what you call
“spatial frequency” and “visual angle”. Although I understand that these might
be obvious for people in the field (which are ultimately the target users of the
package), but I feel like these terms (visual angle, and in particular spatial
frequency) are of such broad usage that they might deserve some better
description of what they mean in the context of the package. Maybe include a
diagram in the vignette for users to visualise what these values represent? In
particular, the Value section in the R help for the calc\_sf\_box() function
seems to mention that the spatial frequency is the number of cycles per degree
of visual angle. Maybe this info could be included in the vignette (and in the
Description section of the function help)?

Items for us:   
- [ ] add definitions and see if we can link to a published review paper


#### Comments on the code of the visual perception functions

> I seem to understand that the functions to calculate visual angle and spatial
frequency in the box example don’t handle the front wall (only the side walls),
am I right? Is there any reason for this? If the front wall is not relevant,
maybe there is no need to include the option to add parameters for it in the
insert_treatments() function?

Items for us:  
- [ ] consider adding in this functionality, OR state in the Help files for
these functions that it is something that will be developed in future pathviewR
updates

*Note from VBB:* for brevity, the details of the reviewer's calculations will
not be included here.

> On that note, there is no need for an ifelse() to calculate these distances,
these lines could simply replace these lines and these lines in calc_sf_box()
and calc_vis_angle_box()

Items for us:  
- [ ] replace `ifelse()` statement in `calc_sf_box()`   
- [ ] replace `ifelse()` statement in `calc_vis_angle_box()`

> Can you please correct the calculations, and adapt the
test-calc_vis_angle_box.R file?

Items for us:  
- [ ] make corrections to the calculations of vis angle and SF  
- [ ] update `test-calc_vis_angle_box.R`

> And also on this, I noticed that the user can supply negative values for the
neg_wall and pos_wall arguments in the insert_treatments() function, which in
this case would lead to spurious distances being calculated. Maybe insert a
warning/error message if that is the case, and add the appropriate tests?

Items for us:  
- [ ] add guidance to the Help file of `insert_treatments()` about feasible 
`neg_wall` and `pos_wall` values  
- [ ] add a check to `insert_treatments()` that stops the function if faulty
`neg_wall` and `pos_wall` values are supplied  
- [ ] add a test to `test-insert_treatments.R` to check the functionality of the
above check  

#### Spatial frequency
> Another point, on the spatial frequency. If I understand it well (being the
number of cycles per degree of visual angle), I think there is an error in these
lines of calc_sf_V() and these lines of calc_sf_box().

Items for us:  
- [ ] make corrections to the calculation of SF

> Just one final broader question, don’t these calculations assume that the bird
is parallel to the length axis of the tunnel? Is that not important/common
practice not to use the rotation information?

Items for us:  
- [ ] in the Help files for each visual perception function: add a note that
rotation information may be integrated in future pathviewR updates  
- [ ] in the Visual perception vignette: add a note that rotation information
may be integrated in future pathviewR updates


## Review from Reviewer 2 (marcosci)

> Should the author(s) deem it appropriate, I agree to be acknowledged as a
package reviewer ("rev" role) in the package DESCRIPTION file.

Items for us:  
- [ ] add marcosci as a "rev" in DESCRIPTION

### Review Comments

> In the description etc. you state that pathviewR is a tool for "animal
movement data" ... Couldn't you make that broader? Part of the package is
actually capable to handle all kinds of 3D movement data and the visual
perception function should also be applicable to humans, or?

Items for us:  
- [ ] consider revising the language of the DESCRIPTION

> It would actually be quite beneficial to give a short walkthrough of what
input data can look like. So, you need x,y,z ... but what more. And what defines
Optitrack and flydra data.

Items for us:  
- [ ] update the language of the Data import and wrangling vignette OR consider
cleaving off some of this stuff into its own vignette

> I did not see any contribution guidelines, so it would be helpful to include
those.

Items for us:  
- [ ] add contribution guidelines

> The Maintainer field is missing in the DESCRIPTION - altough Vikram is listed
as CRE.

Items for us:  
- [ ] update the Maintainer field

> pathviewR ... I submitted a package here once and the feedback was to either
stick with capital letters or just lower case. I don't know if that changed, but
it makes typing the package name out easier in my opinion. If that is a must
should probably be addressed by @maelle.

Items for us:  
- [ ] consider renaming to `pathviewr` or even to another name entirely


## Additional items from the editor (maelle)

> Regarding the package name, yes we recommend all lower-case, especially if the
package isn’t on CRAN yet. I myself renamed my Ropenaq package after review and
I don’t regret doing it.

Items for us:  
- [ ] we should do this as a very last step, i.e. once all other feedback has
been addressed.  
- [ ] to change a package name, follow [this guide](https://www.njtierney.com/post/2017/10/27/change-pkg-name/) 
