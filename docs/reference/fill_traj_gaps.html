<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Interpolate gaps within trajectories — fill_traj_gaps • pathviewr</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Interpolate gaps within trajectories — fill_traj_gaps" />
<meta property="og:description" content="Use LOESS smoothing to fill in gaps of missing data within trajectories in
a viewr object" />
<meta property="og:image" content="https://docs.ropensci.org/pathviewr/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pathviewr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/data-import-cleaning.html">Basics of data import and cleaning in pathviewr</a>
    </li>
    <li>
      <a href="../articles/managing-frame-gaps.html">Managing frame gaps with pathviewr</a>
    </li>
    <li>
      <a href="../articles/visual-perception-functions.html">Estimating visual perceptions from tracking data</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ropensci/pathviewr/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Interpolate gaps within trajectories</h1>
    <small class="dont-index">Source: <a href='https://github.com/ropensci/pathviewr/blob/master/R/utility_functions.R'><code>R/utility_functions.R</code></a></small>
    <div class="hidden name"><code>fill_traj_gaps.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Use LOESS smoothing to fill in gaps of missing data within trajectories in
a viewr object</p>
    </div>

    <pre class="usage"><span class='fu'>fill_traj_gaps</span><span class='op'>(</span>
  <span class='va'>obj_name</span>,
  loess_degree <span class='op'>=</span> <span class='fl'>1</span>,
  loess_criterion <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"aicc"</span>, <span class='st'>"gcv"</span><span class='op'>)</span>,
  loess_family <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"gaussian"</span>, <span class='st'>"symmetric"</span><span class='op'>)</span>,
  loess_user_span <span class='op'>=</span> <span class='cn'>NULL</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>obj_name</th>
      <td><p>The input viewr object; a tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code>. Trajectories must be
predefined (i.e. via <code><a href='separate_trajectories.html'>separate_trajectories()</a></code>).</p></td>
    </tr>
    <tr>
      <th>loess_degree</th>
      <td><p>See "degree" argument of fANCOVA::loess.as()</p></td>
    </tr>
    <tr>
      <th>loess_criterion</th>
      <td><p>See "criterion" argument of fANCOVA::loess.as()</p></td>
    </tr>
    <tr>
      <th>loess_family</th>
      <td><p>See "family" argument of fANCOVA::loess.as()</p></td>
    </tr>
    <tr>
      <th>loess_user_span</th>
      <td><p>See "user.span" argument of fANCOVA::loess.as()</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A viewr object; a tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code> that now includes new
observations (rows) as a result of interpolation to fill in missing data. A
new column <code>gaps_filled</code> is added to the data to indicate original
data ("No") vs data that have been inserted to fill gaps ("Yes").</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>It is strongly recommended that the input viewr object be "cleaned"
via <code><a href='select_x_percent.html'>select_x_percent()</a></code> -&gt; <code><a href='separate_trajectories.html'>separate_trajectories()</a></code> -&gt;
<code><a href='get_full_trajectories.html'>get_full_trajectories()</a></code> prior to using this function. Doing so will
ensure that only trajectories with minor gaps will be used in your
analyses. This function will then enable you to interpolate missing data in
those minor gaps.</p>
<p>Interpolation is handled by first fitting a series of LOESS regressions
(via <code><a href='https://rdrr.io/pkg/fANCOVA/man/loess.as.html'>fANCOVA::loess.as()</a></code>). In each regression, a position axis (e.g.
<code>position_length</code>) is regressed against <code>frame</code> (<code>frame</code> is
x-axis). From that relationship, values of missing position data are
determined and then inserted into the original data set.</p>
<p>See <a href='https://rdrr.io/pkg/fANCOVA/man/loess.as.html'>loess.as</a> for further details on parameters.</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Vikram B. Baliga</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://docs.ropensci.org/pathviewr'>pathviewr</a></span><span class='op'>)</span>

<span class='co'>## Import the example Motive data included in the package</span>
<span class='va'>motive_data</span> <span class='op'>&lt;-</span>
  <span class='fu'><a href='read_motive_csv.html'>read_motive_csv</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"extdata"</span>, <span class='st'>"pathviewr_motive_example_data.csv"</span>,
                             package <span class='op'>=</span> <span class='st'>'pathviewr'</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'>## Clean, isolate, and label trajectories</span>
<span class='va'>motive_full</span> <span class='op'>&lt;-</span>
  <span class='va'>motive_data</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='clean_viewr.html'>clean_viewr</a></span><span class='op'>(</span>desired_percent <span class='op'>=</span> <span class='fl'>50</span>,
              max_frame_gap <span class='op'>=</span> <span class='st'>"autodetect"</span>,
              span <span class='op'>=</span> <span class='fl'>0.95</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>autodetect is an experimental feature -- please report issues.</span></div><div class='input'>
<span class='co'>## Interpolate missing data via this function</span>
<span class='va'>motive_filling</span> <span class='op'>&lt;-</span>
 <span class='va'>motive_full</span> <span class='op'>%&gt;%</span>
 <span class='fu'>fill_traj_gaps</span><span class='op'>(</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>fANCOVA 0.5-1 loaded</span></div><div class='input'>
<span class='co'>## plot all trajectories (before)</span>
<span class='fu'><a href='plot_viewr_trajectories.html'>plot_viewr_trajectories</a></span><span class='op'>(</span><span class='va'>motive_full</span>, multi_plot <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</div><div class='img'><img src='fill_traj_gaps-1.png' alt='' width='700' height='433' /></div><div class='input'><span class='co'>## plot all trajectories(after)</span>
<span class='fu'><a href='plot_viewr_trajectories.html'>plot_viewr_trajectories</a></span><span class='op'>(</span><span class='va'>motive_filling</span>, multi_plot <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</div><div class='img'><img src='fill_traj_gaps-2.png' alt='' width='700' height='433' /></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://www.vikram-baliga.com/'>Vikram B. Baliga</a>, <a href='https://melissasarmstrong.com'>Melissa S. Armstrong</a>, <a href='https://www.grad.ubc.ca/campus-community/meet-our-students/press-eric'>Eric R. Press</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


