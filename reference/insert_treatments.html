<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Inserts treatment and experiment information — insert_treatments • pathviewr</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Inserts treatment and experiment information — insert_treatments" />
<meta property="og:description" content="Adds information about treatment and experimental set up to viewr objects for
analysis in other pathviewr functions" />
<meta property="og:image" content="https://vbaliga.github.io/pathviewr/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pathviewr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.9.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/data-import-cleaning.html">Basics of data import and cleaning in pathviewr</a>
    </li>
    <li>
      <a href="../articles/managing-frame-gaps.html">Managing frame gaps with pathviewr</a>
    </li>
    <li>
      <a href="../articles/visual-perception-functions.html">Estimating visual perceptions from tracking data</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/vbaliga/pathviewr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Inserts treatment and experiment information</h1>
    <small class="dont-index">Source: <a href='https://github.com/vbaliga/pathviewr/blob/master/R/utility_functions.R'><code>R/utility_functions.R</code></a></small>
    <div class="hidden name"><code>insert_treatments.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Adds information about treatment and experimental set up to viewr objects for
analysis in other pathviewr functions</p>
    </div>

    <pre class="usage"><span class='fu'>insert_treatments</span><span class='op'>(</span>
  <span class='va'>obj_name</span>,
  tunnel_config <span class='op'>=</span> <span class='st'>"box"</span>,
  perch_2_vertex <span class='op'>=</span> <span class='cn'>NULL</span>,
  vertex_angle <span class='op'>=</span> <span class='cn'>NULL</span>,
  tunnel_width <span class='op'>=</span> <span class='cn'>NULL</span>,
  tunnel_length <span class='op'>=</span> <span class='cn'>NULL</span>,
  stim_param_lat_pos <span class='op'>=</span> <span class='cn'>NULL</span>,
  stim_param_lat_neg <span class='op'>=</span> <span class='cn'>NULL</span>,
  stim_param_end_pos <span class='op'>=</span> <span class='cn'>NULL</span>,
  stim_param_end_neg <span class='op'>=</span> <span class='cn'>NULL</span>,
  treatment <span class='op'>=</span> <span class='cn'>NULL</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>obj_name</th>
      <td><p>The input viewr object; a tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"viewr"</code></p></td>
    </tr>
    <tr>
      <th>tunnel_config</th>
      <td><p>The configuration of the experimental tunnel.
Currently, pathviewr supports rectangular "box" and V-shaped tunnel
configurations.</p></td>
    </tr>
    <tr>
      <th>perch_2_vertex</th>
      <td><p>If using a V-shaped tunnel, this is the vertical
distance between the vertex and the height of the perches. If the tunnel does
not have perches, insert the vertical distance between the vertex and the
height of the origin (0,0,0).</p></td>
    </tr>
    <tr>
      <th>vertex_angle</th>
      <td><p>If using a V-shaped tunnel, the angle of the vertex (in
degrees) <code>vertex_angle</code> defaults to 90.</p></td>
    </tr>
    <tr>
      <th>tunnel_width</th>
      <td><p>If using a box-shaped tunnel, the width of the tunnel.</p></td>
    </tr>
    <tr>
      <th>tunnel_length</th>
      <td><p>The length of the tunnel.</p></td>
    </tr>
    <tr>
      <th>stim_param_lat_pos</th>
      <td><p>The size of the stimulus on the lateral positive
wall of the tunnel. Eg. for 10cm wide gratings,
<code>stim_param_lat_pos</code> = 0.1.</p></td>
    </tr>
    <tr>
      <th>stim_param_lat_neg</th>
      <td><p>The size of the stimulus on the lateral negative
wall of the tunnel..</p></td>
    </tr>
    <tr>
      <th>stim_param_end_pos</th>
      <td><p>The size of the stimulus on the end positive
wall of the tunnel.</p></td>
    </tr>
    <tr>
      <th>stim_param_end_neg</th>
      <td><p>The size of the stimulus on the end negative
wall of the tunnel.</p></td>
    </tr>
    <tr>
      <th>treatment</th>
      <td><p>The name of the treatment assigned to all rows of the viewr
object. Currently only able to accept a single treatment per viewr data
object.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A viewr object (tibble or data.frame with attribute
<code>pathviewr_steps</code> that includes <code>"treatments added"</code>). Depending
on the argument <code>tunnel_config</code>, the viewr object also includes
columns storing the values of the supplied arguments. This experimental
information is also stored in the viewr object's metadata</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>All length measurements reported in meters.</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Eric R. Press</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'> <span class='co'>## Import sample data from package</span>
 <span class='va'>motive_data</span> <span class='op'>&lt;-</span>
  <span class='fu'><a href='read_motive_csv.html'>read_motive_csv</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"extdata"</span>, <span class='st'>"pathviewr_motive_example_data.csv"</span>,
                              package <span class='op'>=</span> <span class='st'>'pathviewr'</span><span class='op'>)</span><span class='op'>)</span>
 <span class='va'>flydra_data</span> <span class='op'>&lt;-</span>
 <span class='fu'><a href='read_flydra_mat.html'>read_flydra_mat</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"extdata"</span>, <span class='st'>"pathviewr_flydra_example_data.mat"</span>,
                              package <span class='op'>=</span> <span class='st'>'pathviewr'</span><span class='op'>)</span>,
                              subject_name <span class='op'>=</span> <span class='st'>"birdie_sanders"</span><span class='op'>)</span>

  <span class='co'>## Clean data up to and including get_full_trajectories()</span>
<span class='va'>motive_data_full</span> <span class='op'>&lt;-</span>
 <span class='va'>motive_data</span> <span class='op'>%&gt;%</span>
 <span class='fu'><a href='relabel_viewr_axes.html'>relabel_viewr_axes</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
 <span class='fu'><a href='gather_tunnel_data.html'>gather_tunnel_data</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
 <span class='fu'><a href='trim_tunnel_outliers.html'>trim_tunnel_outliers</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
 <span class='fu'><a href='rotate_tunnel.html'>rotate_tunnel</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
 <span class='fu'><a href='select_x_percent.html'>select_x_percent</a></span><span class='op'>(</span>desired_percent <span class='op'>=</span> <span class='fl'>50</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
 <span class='fu'><a href='separate_trajectories.html'>separate_trajectories</a></span><span class='op'>(</span>max_frame_gap <span class='op'>=</span> <span class='st'>"autodetect"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
 <span class='fu'><a href='get_full_trajectories.html'>get_full_trajectories</a></span><span class='op'>(</span>span <span class='op'>=</span> <span class='fl'>0.95</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>autodetect is an experimental feature -- please report issues.</span></div><div class='input'>
 <span class='va'>flydra_data_full</span> <span class='op'>&lt;-</span>
  <span class='va'>flydra_data</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='redefine_tunnel_center.html'>redefine_tunnel_center</a></span><span class='op'>(</span>length_method <span class='op'>=</span> <span class='st'>"middle"</span>,
                        height_method <span class='op'>=</span> <span class='st'>"user-defined"</span>,
                        height_zero <span class='op'>=</span> <span class='fl'>1.44</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='select_x_percent.html'>select_x_percent</a></span><span class='op'>(</span>desired_percent <span class='op'>=</span> <span class='fl'>50</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='separate_trajectories.html'>separate_trajectories</a></span><span class='op'>(</span>max_frame_gap <span class='op'>=</span> <span class='st'>"autodetect"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='get_full_trajectories.html'>get_full_trajectories</a></span><span class='op'>(</span>span <span class='op'>=</span> <span class='fl'>0.95</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>autodetect is an experimental feature -- please report issues.</span></div><div class='input'>

<span class='co'>## Now add information about the experimental configuration. In this example,</span>
<span class='co'>## a V-shaped tunnel in which the vertex is 90deg and lies 0.40m below the</span>
<span class='co'>## origin. The visual stimuli on the lateral and end walls have a cycle</span>
<span class='co'>## length of 0.1m and 0.3m respectively, and the treatment is labeled</span>
<span class='co'>## "lat10_end30"</span>

<span class='va'>motive_v</span> <span class='op'>&lt;-</span>
<span class='va'>motive_data_full</span> <span class='op'>%&gt;%</span>
 <span class='fu'>insert_treatments</span><span class='op'>(</span>tunnel_config <span class='op'>=</span> <span class='st'>"v"</span>,
                   perch_2_vertex <span class='op'>=</span> <span class='fl'>0.4</span>,
                   vertex_angle <span class='op'>=</span> <span class='fl'>90</span>,
                   tunnel_length <span class='op'>=</span> <span class='fl'>2</span>,
                   stim_param_lat_pos <span class='op'>=</span> <span class='fl'>0.1</span>,
                   stim_param_lat_neg <span class='op'>=</span> <span class='fl'>0.1</span>,
                   stim_param_end_pos <span class='op'>=</span> <span class='fl'>0.3</span>,
                   stim_param_end_neg <span class='op'>=</span> <span class='fl'>0.3</span>,
                   treatment <span class='op'>=</span> <span class='st'>"lat10_end_30"</span><span class='op'>)</span>

<span class='co'># For an experiment using the box-shaped configuration where the tunnel is 1m</span>
<span class='co'># wide and 3m long and the visual stimuli on the lateral and end walls have a</span>
<span class='co'># cycle length of 0.2 and 0.3m, respectively, and the treatment is labeled</span>
<span class='co'># "lat20_end30".</span>

<span class='va'>flydra_box</span> <span class='op'>&lt;-</span>
 <span class='va'>flydra_data_full</span> <span class='op'>%&gt;%</span>
 <span class='fu'>insert_treatments</span><span class='op'>(</span>tunnel_config <span class='op'>=</span> <span class='st'>"box"</span>,
                   tunnel_width <span class='op'>=</span> <span class='fl'>1</span>,
                   tunnel_length <span class='op'>=</span> <span class='fl'>3</span>,
                   stim_param_lat_pos <span class='op'>=</span> <span class='fl'>0.2</span>,
                   stim_param_lat_neg <span class='op'>=</span> <span class='fl'>0.2</span>,
                   stim_param_end_pos <span class='op'>=</span> <span class='fl'>0.3</span>,
                   stim_param_end_neg <span class='op'>=</span> <span class='fl'>0.3</span>,
                   treatment <span class='op'>=</span> <span class='st'>"lat20_end30"</span><span class='op'>)</span>

<span class='co'>## Check out the new columns in the resulting objects</span>
<span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>motive_v</span><span class='op'>)</span>
</div><div class='output co'>#&gt;  [1] "tunnel_config"      "perch_2_vertex"     "vertex_angle"      
#&gt;  [4] "tunnel_length"      "stim_param_lat_pos" "stim_param_lat_neg"
#&gt;  [7] "stim_param_end_pos" "stim_param_end_neg" "treatment"         
#&gt; [10] "frame"              "time_sec"           "subject"           
#&gt; [13] "position_length"    "position_width"     "position_height"   
#&gt; [16] "rotation_length"    "rotation_width"     "rotation_height"   
#&gt; [19] "rotation_real"      "mean_marker_error"  "traj_id"           
#&gt; [22] "file_sub_traj"      "traj_length"        "start_length"      
#&gt; [25] "end_length"         "length_diff"        "start_length_sign" 
#&gt; [28] "end_length_sign"    "direction"         </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>flydra_box</span><span class='op'>)</span>
</div><div class='output co'>#&gt;  [1] "tunnel_config"      "tunnel_width"       "tunnel_length"     
#&gt;  [4] "stim_param_lat_pos" "stim_param_lat_neg" "stim_param_end_pos"
#&gt;  [7] "stim_param_end_neg" "treatment"          "frame"             
#&gt; [10] "time_sec"           "subject"            "position_length"   
#&gt; [13] "position_width"     "position_height"    "traj_id"           
#&gt; [16] "file_sub_traj"      "traj_length"        "start_length"      
#&gt; [19] "end_length"         "length_diff"        "start_length_sign" 
#&gt; [22] "end_length_sign"    "direction"         </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://melissasarmstrong.com'>Melissa S. Armstrong</a>, <a href='https://www.vikram-baliga.com/'>Vikram B. Baliga</a>, <a href='https://www.grad.ubc.ca/campus-community/meet-our-students/press-eric'>Eric R. Press</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


